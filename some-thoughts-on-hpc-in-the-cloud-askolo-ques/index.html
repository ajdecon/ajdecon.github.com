
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Some thoughts on #HPC in the #cloud... (#askolo question) - Thinking Out Loud</title>
  <meta name="author" content="Adam DeConinck">

   
  <meta name="description" content="">
  
  <meta name="keywords" content="">

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://blog.ajdecon.org/some-thoughts-on-hpc-in-the-cloud-askolo-ques">
  <link href="/favicon.png" rel="icon">
  <link href='http://fonts.googleapis.com/css?family=Quicksand:300,400' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300' rel='stylesheet' type='text/css'>
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Thinking Out Loud" type="application/atom+xml">
  <script src="/js/jquery.js"></script>
  <script src="/js/bootstrap-collapse.js"></script>
  <script src="/js/modernizr-2.0.js"></script>
  <script src="/js/octopress.js" type="text/javascript"></script>
  <script src="/js/application.js"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-12576607-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <div class="navbar navbar-inverse navbar-static-top">
  	<div class="navbar-inner">
  	  <div class="container">
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".navbar-responsive-collapse">
          <span class="fui-menu-24"></span>
        </a>
  	  	<div class="nav-collapse collapse navbar-responsive-collapse" style="height:0;">
  	      <ul class="nav">
    
        <li ><a href="/">Home</a></li>
    
        <li ><a href="/about">About Adam</a></li>
    
        <li ><a href="https://www.ajdecon.org/ajdecon-key.txt">GPG key</a></li>
    
        <li ><a href="/pubs">Publications</a></li>
    
        <li ><a href="/atom.xml">RSS</a></li>
    
</ul>

<ul class="nav pull-right">
    
    <li><a href="http://github.com/ajdecon" title="Github Profile"><i class="icon-github-sign social-navbar"></i></a></li>
    
    
    
    <li><a href="http://linkedin.com/in/ajdecon" title="Linkedin Profile"><i class="icon-linkedin-local social-navbar"></i></a></li>
    
    
    <li><a href="http://twitter.com/ajdecon" title="Twitter Profile"><i class="icon-twitter-local social-navbar"></i></a></li>
    
    
    <li><a href="http://plus.google.com/116247823819167414235" title="Google+ Profile"><i class="icon-google-plus-local social-navbar"></i></a></li>
    
    
    

    
    <li><a href="mailto:ajdecon@ajdecon.org" title="Email"><i class="icon-envelope social-navbar"></i></a></li>
    
</ul>

  	    </div>
  	  </div>
  	</div>
  </div>
  <div class="container" id="main">
      <div class="row-fluid">
        <div id="content">
          <div>
<article class="hentry" role="article">
  

  <header>
  <div class="jumbotron">
    Some Thoughts on #HPC in the #cloud... (#askolo Question)
	<h5>








  


<i class="icon-calendar-empty"></i> <time datetime="2012-04-13T00:00:00-06:00" pubdate data-updated="true">Apr 13<span>th</span>, 2012</time></h5>
  </div>
</header>
  <div class="row-fluid">
    <div class="span12">
      <p><span style="font-size: small;">As <a href="http://blog.ajdecon.org/askolo-an-interesting-new-one-to-one-qa-site">previously mentioned</a>, I&#8217;ve been spending some time lately on <a href="http://www.askolo.com/">Askolo</a>, a directed Q&amp;A website. My first question from another user was &#8221;<span style="color: #161f21; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; line-height: 16px;">What do you think of the AWS HPC clusters?</span><span style="color: #161f21; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; font-weight: bold; line-height: 16px;">&#8221;, </span><span style="color: #161f21; line-height: 16px;">and I wrote a fairly lengthy 
and rambling response which seemed worth saving. <strong>(From 12/9/2012: Askolo went into maintenance mode later this year, and the 
site&#8217;s future is uncertain&#8230; so this may have been a good idea! :) )</strong>  I&#8217;m pasting it here (slightly modified) so it gets a different audience, and to keep my own copy for later comparison as my opinions evolve.</span></span></p>
<p><span style="color: #161f21; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; font-weight: bold; line-height: 16px; font-size: small;">Q: What do you think of the AWS HPC clusters?</span></p>
<p><span style="font-size: small;"><strong>A: </strong>Disclaimer on this one: I&#8217;m an engineer at <a href="http://www.r-hpc.com/">R Systems</a>, which provides bare-metal HPC clusters as a service, in competition with Amazon&#8217;s HPC offering. Also, this got a little long. :)</span></p>
<p><span style="font-size: small;"><span class="answer-chunk" style="color: #333333; font-family: georgia, times new roman, times, serif; line-height: 21px;"><br />That said, I think the AWS HPC clusters are really interesting. They&#8217;re definitely useful for &#8220;bursting&#8221; loads and certain classes of problems, though they still have a few problems to solve before they can replace a &#8220;traditional&#8221; cluster. But for a lot of wokloads, it may be exactly what you want.<p />For HPC, Amazon provides exactly the same thing it provides for everyone else: a big pool of available servers which can be spun up and down at will, with a potentially huge upper limit. You may have seen the article last year about the 30,000 or so core cluster which <a href="http://arstechnica.com/business/news/2011/09/30000-core-cluster-built-on-amazon-ec2-cloud.ars">Cycle Computing spun up on EC2</a>: it made the Top 500 list of supercomputers, and demonstrated that it was possible to run a huge compute resource &#8220;in the cloud&#8221;.&nbsp;<p />There are some drawbacks though. Cycle Computing ran an embarrassingly parallel problem, but a lot of research models are very tightly coupled and do a lot of message passing between processes. (For example, big CFD models and mechanical modeling problems.) Most big HPC clusters currently use Infiniband as their interconnect, so node-to-node the network provides up to 54 Gb/s bandwidth and 1 us latency (process-to-process). The latency is especially important: I think most CFD apps I&#8217;ve worked with lately are latency-bound. Right now the best network performance you can get on EC2 is 10Gb ethernet, which doesn&#8217;t quite provide the same punch. The disadvantage to IB is that its network model is radically different, to the point where the IP Protocol feels a bit bolted-on and can&#8217;t get all the network performance. Most people program their apps with specialized message-passing libraries (ie MPI) which can take advantage of the IB network directly.<p />EC2 also doesn&#8217;t get the same I/O performance you can get on bare metal. This one&#8217;s a problem for lots of people, including big web sites, and it matters in HPC too. A lot of HPC installations have big parallel filesystems that stripe over many disks, like Lustre. It&#8217;d be interesting to see what you could do running Lustre on EC2, but I think using EBS as the backing strorage would make it somewhat painful. Much nicer to use big I/O nodes attached to Infiniband.<p />But you notice how much specialized hardware we&#8217;re talking about here? Lots of big I/O nodes, a specialized network where even IP is a second-class citizen&#8230; it all makes sense if you do HPC all the time, but if you only need to run for a few months out of the year it can seem like overkill. Especially if you are in fact running embarrassingly parallel models (and really, a whole lot of them are).<p />I saw a talk at Supercomputing in November where someone compared their own internal cluster to 3-year reserved instances on Amazon, and determined that Amazon would make sense if their internal cluster had yearly utilization of less than about 70%. That&#8217;s actually pretty impressive! Most &#8220;big HPC&#8221; out there has utilization of 90+% and can you get us some more please ;-) , but there are a lot of companies with underused 32-node clusters out there which might make more sense in the cloud.<p />On a site with so many people running startups I hope I can be forgiven a tiny bit of self-promotion: at R Systems we provide clusters as a service with all the bells and whistles and Infiniband included, and help you use and configure them as well. :-) But that doesn&#8217;t mean I think Amazon sucks: I&#8217;ve seen their service do amazing things, especially for highly-variable workplace or embarrassingly parallel problems.&nbsp;<p />What all this does mean that for HPC, you need to think at least a bit about the hardware, which I guess makes even Amazon a bit less cloudy. You need to think about what kind of inter-node communication you need, ans how fast your IO needs to be. If you use GPUs, you need to know what type ans think about PCI performance. And you can&#8217;t just throw more cores at the problem, because communication bottlenecks will kill you.<p />So HPC on AWS is very cool, as is HPC on R Systems or other external providers. But profile your application and think about hardware before you spin up 1000 nodes. :-)</span><span style="color: #333333; font-family: georgia, times new roman, times, serif; line-height: 21px;">&nbsp;</span></span></p>

    </div>
  </div>



  <footer>
    <hr>
    
    <div class="row-fluid">
      
      <div class="span6">
        <p class="meta">
        
        



  <a href="/blog/categories/askolo/"><span class="badge">askolo</span></a>

  <a href="/blog/categories/hpc/"><span class="badge">hpc</span></a>

  <a href="/blog/categories/opinion/"><span class="badge">opinion</span></a>




        </p>
      </div>
      
      <div class="span6 social-sharing">
        <div class="sharing">
  <div class="addthis_toolbox addthis_default_style ">
  
  
  <a class="addthis_button_tweet"></a>
  
  
  <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
  
  <a class="addthis_counter addthis_pill_style"></a>
  </div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>

      </div>
      
      
    </div>
    
    <div class="row-fluid">
      <div class="span12">
        <p class="meta">
          
            <a class="basic-alignment left" href="/adam-gets-a-macbook-and-its-not-the-end-of-th/" title="Previous Post: Adam gets a MacBook, and it's not the end of the world...">&laquo; Adam gets a MacBook, and it's not the end of the world...</a>
          
          
            <a class="basic-alignment right" href="/how-to-survive-fencing-tournaments/" title="Next Post: How to survive fencing tournaments">How to survive fencing tournaments &raquo;</a>
          
        </p>
      </div>
    </div>
  </footer>
</article>

</div>



        </div>
      </div>
      <div class="row-fluid">
        <footer class="footer-page" role="contentinfo">
          <p>
  Copyright &copy; 2015 - Adam DeConinck -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span> - Theme by <a href="http://alexgaribay.com">Alex Garibay</a>
</p>


        </footer>
      </div>
  </div>
  

<script type="text/javascript">
      var disqus_shortname = 'ajdecon';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
